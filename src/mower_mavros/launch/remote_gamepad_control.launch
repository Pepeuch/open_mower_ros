<launch>
    <group if="$(eval env('OM_MOWER_GAMEPAD') == 'xbox360')">
        <node name="remote_joy" pkg="joy" type="joy_node" required="true">
            <param name="~autorepeat_rate" value="10.0"/>
            <param name="~coalesce_interval" value="0.06"/>
        </node>

    </group>

    <group unless="$(eval env('OM_MOWER_GAMEPAD') == 'xbox360')">
        <node name="remote_joy" pkg="joy" type="joy_node" required="true" >
            <remap from="/joy" to="/teleop_joy"/>
            <param name="~coalesce_interval" value="0.06"/>
        </node>

        <rosparam file="$(find open_mower)/params/gamepads/$(env OM_MOWER_GAMEPAD).yaml" command="load"/>

    </group>
        <!-- Ajout du nœud MAVROS si les commandes doivent être transmises via MAVLink -->
    <node pkg="mavros" type="node" name="mavros" output="screen">
        <param name="fcu_url" value="udp://:14540@localhost:14557" /> <!-- adapter si nécessaire -->
        <param name="gcs_url" value="" />
        <param name="target_system_id" value="1" />
        <param name="target_component_id" value="1" />
</launch>
